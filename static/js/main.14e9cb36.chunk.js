(this.webpackJsonpmesto=this.webpackJsonpmesto||[]).push([[0],{147:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var s,c=n(0),i=n.n(c),o=(n(95),n(96),n(97),n(81)),a=n.n(o),l=(n(70),n(46)),p=n(15),r=n(188),u=n(187),d=n(189),j=n(190),h=n(185),g=n(66),b=n.n(g),m=n(34),O=n(1),x=function(e){var t=e.isLogin,n=e.setisLogin,s=(e.userName,function(){localStorage.setItem("islogin",!1),n(!1)});return Object(O.jsx)(u.a,{sx:{flexGrow:1},children:Object(O.jsx)(r.a,{position:"static",children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"\u0411\u043b\u043e\u0433"}),t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(h.a,{children:Object(O.jsx)("nav",{children:Object(O.jsx)(m.b,{activeClassName:"activeLink",className:"nav-link",exact:!0,to:"*",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})}),Object(O.jsx)(h.a,{children:Object(O.jsx)("nav",{children:Object(O.jsxs)(m.b,{onClick:s,className:"nav-link",exact:!0,to:"/login",children:[localStorage.getItem("userName"),Object(O.jsx)(b.a,{}),"\u0412\u044b\u0445\u043e\u0434"]})})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.b,{activeClassName:"activeLink",className:"nav-link",exact:!0,to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(O.jsxs)(m.b,{onClick:s,className:"nav-link",exact:!0,to:"/login",children:[Object(O.jsx)(b.a,{}),"\u0412\u0445\u043e\u0434"]})]})]})})})},f=n(14),v=n(36),_=n(37),P=n(39),k=n(38),y=n(35),C=n.n(y),S=n(184),N=n(84),w=n.n(N),E=n(86),A=n.n(E),L=n(193),F=n(196),I=n(195),D=n(194),q=n(85),T=n.n(q),M=Object(S.a)({root:{width:250,height:130}}),U=function(e){var t=e.title,n=e.description,s=e.likePost,c=e.liked,i=e.deletePost,o=e.image,a=e.togglePopupEdit,l=e.handleSelectPost,p=c?"crimson":"black",r=M();return Object(O.jsxs)(L.a,{sx:{maxWidth:250},children:[Object(O.jsx)(D.a,{children:Object(O.jsx)("img",{className:r.root,src:o})}),Object(O.jsxs)(I.a,{children:[Object(O.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(O.jsx)(j.a,{variant:"body2",color:"text.secondary",children:n})]}),Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(h.a,{size:"small",children:[" ",Object(O.jsx)(w.a,{onClick:s,style:{fill:p}})]}),Object(O.jsxs)(h.a,{size:"small",children:[" ",Object(O.jsx)(T.a,{onClick:function(){a(),l()}})]}),Object(O.jsxs)(h.a,{size:"small",children:[" ",Object(O.jsx)(A.a,{onClick:i})]})]})]})},W=n.p+"static/media/close.8a65f75d.svg",z=function(e){Object(P.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={title:"",description:"",image:""},e.handleTitleOnchange=function(t){e.setState({title:t.target.value})},e.handleImageOnchange=function(t){e.setState({image:t.target.value})},e.closeEscape=function(t){"Escape"===t.key&&e.props.togglePopupClose()},e.handleDescriptionOnchange=function(t){e.setState({description:t.target.value})},e.createPost=function(){var t={title:e.state.title,description:e.state.description,liked:!1,image:e.state.image};e.props.addNewPost(t),e.props.togglePopupClose()},e}return Object(_.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.closeEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.closeEscape)}},{key:"render",value:function(){var e=this.props.togglePopupClose;return Object(O.jsx)("div",{className:"popup",children:Object(O.jsxs)("div",{class:"popup__content",children:[Object(O.jsx)("img",{src:W,onClick:e,alt:"",class:"popup__close"}),Object(O.jsx)("h3",{class:"popup__title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(O.jsxs)("form",{class:"popup__form",onSubmit:this.createPost,name:"new",novalidate:!0,children:[Object(O.jsx)("input",{type:"text",id:"name-card",name:"title",class:"popup__input popup__input_type_name",minlength:"2",maxlength:"30",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430",value:this.state.title,onChange:this.handleTitleOnchange}),Object(O.jsx)("input",{type:"text",id:"name-card",name:"image",class:"popup__input popup__input_type_name",minlength:"2",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:this.state.image,onChange:this.handleImageOnchange}),Object(O.jsx)("span",{id:"name-card-error",class:"error"}),Object(O.jsx)("textarea",{type:"text",id:"description",name:"description",class:"popup__input popup__input_type_link-url",minlength:"2",required:!0,placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430",value:this.state.description,onChange:this.handleDescriptionOnchange}),Object(O.jsx)("span",{id:"link-error",class:"error"}),Object(O.jsx)("button",{type:"submit",class:"button popup__button  popup__button_valid",children:"+"})]})]})})}}]),n}(c.Component),B=function(e){Object(P.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={title:e.props.selectedPost.title,description:e.props.selectedPost.description,image:e.props.selectedPost.image},e.handleTitleOnchange=function(t){e.setState({title:t.target.value})},e.handleImageOnchange=function(t){e.setState({image:t.target.value})},e.closeEscape=function(t){"Escape"===t.key&&e.props.togglePopupClose()},e.handleDescriptionOnchange=function(t){e.setState({description:t.target.value})},e.savePost=function(t){t.preventDefault();var n={id:e.props.selectedPost.id,title:e.state.title,description:e.state.description,liked:e.props.selectedPost.liked,image:e.state.image};e.props.editPost(n),e.props.togglePopupClose()},e}return Object(_.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.closeEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.closeEscape)}},{key:"render",value:function(){var e=this.props.togglePopupClose;return console.log(this.props),Object(O.jsx)("div",{className:"popup",children:Object(O.jsxs)("div",{class:"popup__content",children:[Object(O.jsx)("img",{src:W,onClick:e,alt:"",class:"popup__close"}),Object(O.jsx)("h3",{class:"popup__title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(O.jsxs)("form",{class:"popup__form",onSubmit:this.savePost,name:"new",novalidate:!0,children:[Object(O.jsx)("input",{type:"text",id:"name-card",name:"title",class:"popup__input popup__input_type_name",minlength:"2",maxlength:"30",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430",value:this.state.title,onChange:this.handleTitleOnchange}),Object(O.jsx)("input",{type:"text",id:"name-card",name:"image",class:"popup__input popup__input_type_name",minlength:"2",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:this.state.image,onChange:this.handleImageOnchange}),Object(O.jsx)("span",{id:"name-card-error",class:"error"}),Object(O.jsx)("textarea",{type:"text",id:"description",name:"description",class:"popup__input popup__input_type_link-url",minlength:"2",required:!0,placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430",value:this.state.description,onChange:this.handleDescriptionOnchange}),Object(O.jsx)("span",{id:"link-error",class:"error"}),Object(O.jsx)("button",{type:"submit",class:"button popup__button  popup__button_valid",children:"+"})]})]})})}}]),n}(c.Component),G=(n(147),n(191)),J=function(e){Object(P.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var c=arguments.length,i=new Array(c),o=0;o<c;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={popupEdit:!1,popupAdd:!1,blogArr:[],isPending:!1,selectedPost:{}},e.likePost=function(t){var n=Object(l.a)({},t);n.liked=!n.liked,C.a.put("https://617e6ebc2ff7e600174bd7c2.mockapi.io/posts/".concat(t.id),n).then((function(t){console.log("\u041f\u043e\u0441\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d=>",t.data),e.fetchPost()})).catch((function(e){console.log(e)}))},e.togglePopupEdit=function(){e.setState({popupEdit:!0})},e.togglePopupAdd=function(){e.setState({popupAdd:!0})},e.togglePopupClose=function(){e.setState({popupAdd:!1})},e.togglePopupCloseEdit=function(){e.setState({popupEdit:!1})},e.deletePost=function(t){e.setState({isPending:!0}),C.a.delete("https://617e6ebc2ff7e600174bd7c2.mockapi.io/posts/".concat(t.id)).then((function(t){console.log("\u041f\u043e\u0441\u0442 \u0443\u0434\u0430\u043b\u0435\u043d=>",t.data),e.fetchPost()})).catch((function(e){console.log(e)}))},e.handleSelectPost=function(t){e.setState({selectedPost:t})},e.addNewPost=function(t){e.setState({isPending:!0}),C.a.post("https://617e6ebc2ff7e600174bd7c2.mockapi.io/posts",t).then((function(t){console.log("\u041f\u043e\u0441\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d=>",t.data),e.fetchPost()})).catch((function(e){console.log(e)}))},e.editPost=function(t){e.setState({isPending:!0}),C.a.put("https://617e6ebc2ff7e600174bd7c2.mockapi.io/posts/".concat(t.id),t).then((function(t){console.log("\u041f\u043e\u0441\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d=>",t.data),e.fetchPost()})).catch((function(e){console.log(e)}))},e.fetchPost=function(){s=C.a.CancelToken.source(),C.a.get("https://617e6ebc2ff7e600174bd7c2.mockapi.io/posts",{cancelToken:s.token}).then((function(t){console.log(t.data),e.setState({blogArr:t.data,isPending:!1})})).catch((function(e){console.log(e)}))},e}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.fetchPost()}},{key:"componentWillMount",value:function(){s&&s.cancel("axios")}},{key:"render",value:function(){var e=this;console.log(this.state.selectedPost);var t=this.state.isPending?.5:1,n=this.state.blogArr.map((function(t){if(null!==t)return Object(O.jsx)(U,{title:t.title,description:t.description,liked:t.liked,likePost:function(){return e.likePost(t)},deletePost:function(){return e.deletePost(t)},image:t.image,togglePopupEdit:function(){return e.togglePopupEdit()},handleSelectPost:function(){return e.handleSelectPost(t)}},t.id)}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"title container",children:Object(O.jsx)(h.a,{variant:"outlined",onClick:this.togglePopupAdd,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})}),this.state.popupAdd?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(z,{blogArr:this.state.blogArr,togglePopupClose:this.togglePopupClose,addNewPost:this.addNewPost})}):null,this.state.popupEdit?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(B,{blogArr:this.state.blogArr,selectedPost:this.state.selectedPost,togglePopupClose:this.togglePopupCloseEdit,editPost:this.editPost})}):null,Object(O.jsxs)("div",{className:"places-list",children:[Object(O.jsx)("div",{className:"circular",style:{opacity:t},children:this.state.isPending&&Object(O.jsx)(G.a,{})}),n]})]})}}]),n}(c.Component),H=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(J,{})})})},K=function(e){e.setUserName;var t=e.setisLogin,n=e.history,s=Object(c.useState)(""),i=Object(p.a)(s,2),o=i[0],a=i[1],l=Object(c.useState)(""),r=Object(p.a)(l,2),u=(r[0],r[1]);return Object(O.jsx)("div",{className:"popup",children:Object(O.jsxs)("div",{class:"popup__content",children:[Object(O.jsx)("img",{src:!0,alt:"",class:"popup__close"}),Object(O.jsx)("h3",{class:"popup__title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(O.jsxs)("form",{class:"popup__form",onSubmit:function(e){e.preventDefault(),t(!0),localStorage.setItem("userName",o),localStorage.setItem("islogin",!0),n.push("/")},name:"new",novalidate:!0,children:[Object(O.jsx)("input",{type:"text",id:"name-card",name:"title",class:"popup__input popup__input_type_name",minlength:"2",maxlength:"30",required:!0,placeholder:"\u043b\u043e\u0433\u0438\u043d",onChange:function(e){a(e.target.value)}}),Object(O.jsx)("input",{type:"text",id:"name-card",name:"image",class:"popup__input popup__input_type_name",minlength:"2",onChange:function(e){u(e.target.value)},required:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(O.jsx)("span",{id:"name-card-error",class:"error"}),Object(O.jsx)("span",{id:"link-error",class:"error"}),Object(O.jsx)("button",{type:"submit",class:"button popup__button  popup__button_valid",children:"+"})]})]})})},Q=function(){var e=Object(c.useState)((function(){return!!localStorage.getItem("islogin")})),t=Object(p.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(""),o=Object(p.a)(i,2),a=o[0],r=o[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(m.a,{children:[Object(O.jsx)(x,{isLogin:n,setisLogin:s,userName:a}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(f.c,{children:[Object(O.jsx)(f.a,{path:"*",exact:!0,component:H}),Object(O.jsx)(f.a,{path:"/login",exact:!0,render:function(e){return Object(O.jsx)(K,Object(l.a)(Object(l.a)({},e),{},{setisLogin:s,setUserName:r}))}})]})})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),i(e),o(e)}))};a.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(Q,{})}),document.getElementById("root")),R()},70:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.14e9cb36.chunk.js.map